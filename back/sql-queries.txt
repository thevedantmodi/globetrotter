CREATE TYPE port_size as ENUM('small', 'medium', 'large');
CREATE TABLE IF NOT EXISTS airports (
    iata VARCHAR(3) PRIMARY KEY,
    lat REAL,
    lon REAL,
    country VARCHAR(2) REFERENCES countries(id),
    icao VARCHAR(4),
    tz VARCHAR(30) REFERENCES timezones(id),
    city VARCHAR(500),
    subd VARCHAR(500),
    size port_size
);

\COPY airports FROM
/Users/vedantmodi/dev-work/closed-flights/data-treatment/airports-mongo.csv
DELIMITER ',' CSV header;

CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    hashed_pwd VARCHAR(255) NOT NULL,
    hometown VARCHAR(255),
    km_flown INT DEFAULT 0
);

CREATE TABLE IF NOT EXISTS users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    hashed_pwd VARCHAR(255) NOT NULL,
    hometown VARCHAR(255),
    km_flown INT DEFAULT 0
);

INSERT INTO users (email, hashed_pwd, hometown, km_flown) 
VALUES ('vedantmodi@gmail.com', 'ersgrsegdfshgsrysdg', 'Houston, TX', 1500)

CREATE TABLE IF NOT EXISTS flights (
    id BIGSERIAL PRIMARY KEY,
    dept_datetime TIMESTAMPTZ
);